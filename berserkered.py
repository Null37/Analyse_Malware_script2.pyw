import os
import re
import subprocess


def write(file_name, data):
    with open(file_name, "w") as f:
        f.write(data)


if __name__ == "__main__":

    obf_file = "script2.pyw"  # obfuscated file

    with open(obf_file) as code:
        data = code.read()

        s1 = re.search("if self.(.+?) in open", data)[1]
        s1s = s1.replace("15", "12")
        s2 = re.findall("{(.+?)}", data)

        source = (
            data.replace(s1, s1s)
            .replace("{" + s2[0] + "}", "print")
            .replace(",{" + s2[1] + "}()", "")
        )
        write('tmpfile.py', source)
        subprocess.run(["python", "tmpfile.py"])
        os.unlink('tmpfile.py')
